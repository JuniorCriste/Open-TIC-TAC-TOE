' Gambas class file

Public typemode As Integer ' IF 1 -> People x People  |  IF 2 People X Computer
Public abriuSettings As Boolean
Public trilha As Music
Public curmouse As Cursor
Public desmouse As Picture
Public configuracao As String
Public arquivotxt As String
Public contaVtxt As String
Public contaPtxt As String
Public contaDtxt As String
Public contaV2txt As String


Public Sub Form_Open()

  
  carregarConfiguracoes
  Wait 0.05
  Print Game.partidasjogadas
  tocamusica
 ' desmouse = Picture.Load("./assets/Imgs/cursor.png")
 ' curmouse = New Cursor(desmouse, 300, 300)
 
 
  op1.Mouse = Mouse.Custom
    op1.Cursor = New Cursor(Picture["./assets/Imgs/cursormini.png"])
    
  op2.Mouse = Mouse.Custom
    op2.Cursor = New Cursor(Picture["./assets/Imgs/cursormini.png"])
    
  infp1.Mouse = Mouse.Custom
    infp1.Cursor = New Cursor(Picture["./assets/Imgs/cursormini2.png"])
    
  infp2.Mouse = Mouse.Custom
    infp2.Cursor = New Cursor(Picture["./assets/Imgs/cursormini2.png"])
    
  MenuG.Mouse = Mouse.Custom
    MenuG.Cursor = New Cursor(Picture["./assets/Imgs/cursormini2.png"])

  sett.Mouse = Mouse.Custom
    sett.Cursor = New Cursor(Picture["./assets/Imgs/cursormini.png"])
    
  hist.Mouse = Mouse.Custom
    hist.Cursor = New Cursor(Picture["./assets/Imgs/cursormini.png"])
    
  info.Mouse = Mouse.Custom
    info.Cursor = New Cursor(Picture["./assets/Imgs/cursormini.png"])
    
    Dadoslog
    primeiraVez
  
End

Public Sub op1_MouseDown()

  typemode = 1
  Game.playername = "PLAYER 2"
  Game.infp2plus.Text = "PLAYER2"
  
    Game.Show
    MenuG.Hide

End

Public Sub op2_MouseDown()

    typemode = 2
  Game.playername = "COMPUTER"
  Game.infp2plus.Text = "COMPUTER"
    
    Game.Show
    MenuG.Hide

End

Public Sub Form_KeyPress()

  
    If Key.Code = 65470 Then 
 About.Show
Endif


End

Public Sub sett_MouseDown()
  abriuSettings = True
  Settings.Show
End



Public Sub tocamusica()
Dim quemToca As String
Music.Stop

  
  quemToca = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "configApp.txt"))
  Print "quemToca -> " & quemToca

  If quemToca = "mus1" Then
  Music.Load("./assets/Music/track1.ogg")    ' sound check
  Music.play(-1, 0)
  Settings.optrack1.Value = True
  Endif
  

  
  If quemToca = "mus2" Then
  Music.Load("./assets/Music/track2.ogg")    ' sound check
  Music.play(-1, 0)
  Settings.optrack2.Value = True
  Endif
  

  
  If quemToca = "mus3" Then
  Music.Load("./assets/Music/track3.ogg")    ' sound check
  Music.play(-1, 0)
  Settings.optrack3.Value = True
  Endif
  

  
  If quemToca = "mus4" Then
  Music.Load("./assets/Music/track4.ogg")    ' sound check
  Music.play(-1, 0)
  Settings.optrack4.Value = True
  Endif
  

  
  If quemToca = "mus0" Then
    Settings.musicop.Value = False
  Endif
  
  defineback
  
End

Public Sub defineback()
Dim whosbackground As String


  
  whosbackground = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "configBG.txt"))
  Print "whosbackground -> " & whosbackground
  
  
    If whosbackground = "BG1" Then
  Game.fnd.Visible = True
  Game.fnd2.Visible = False
  Game.fnd3.Visible = False
  Game.fnd4.Visible = False
  Endif
  

  
  If whosbackground = "BG2" Then
  Game.fnd.Visible = False
  Game.fnd2.Visible = True
  Game.fnd3.Visible = False
  Game.fnd4.Visible = False
  Endif
  

  
  If whosbackground = "BG3" Then
  Game.fnd.Visible = False
  Game.fnd2.Visible = False
  Game.fnd3.Visible = True
  Game.fnd4.Visible = False
  Endif
  

  
  If whosbackground = "BG4" Then
  Game.fnd.Visible = False
  Game.fnd2.Visible = False
  Game.fnd3.Visible = False
  Game.fnd4.Visible = True
  Endif
  
  
End



Public Sub Form_Close()

  Music.Stop

End


Public Sub carregarConfiguracoes()
  
  configuracoesExiste
  contaVitorias
  contaVitoriascP2
  contaVitoriasP2
  contaempates
  contaPartidas
  contaDerrotas
  
  'configuracao = "TESTANDO ARQUIVO DE CONFIGURAÇÃO!"
  'File.Save(arquivotxt, configuracao)
  
  
End



Public Sub configuracoesExiste()
  
  
  arquivotxt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "configApp.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e configApp.txt ];  then echo ARQUIVO JA EXISTE; else touch configApp.txt; echo mus1 > configApp.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"

  
  arquivotxt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "configBG.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e configBG.txt ];  then echo ARQUIVO JA EXISTE; else touch configBG.txt; echo BG1 > configBG.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"

  
End


Public Sub contaVitorias()
  
  contaVtxt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaV.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e contaV.txt ];  then echo ARQUIVO JA EXISTE; else touch contaV.txt; echo 0 > contaV.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"
  
End


Public Sub contaVitoriascP2()
  
  contaVtxt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaVcP2.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e contaVcP2.txt ];  then echo ARQUIVO JA EXISTE; else touch contaVcP2.txt; echo 0 > contaVcP2.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"
  
End





Public Sub contaVitoriasP2()
  
  contaV2txt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaV2.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e contaV2.txt ];  then echo ARQUIVO JA EXISTE; else touch contaV2.txt; echo 0 > contaV2.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"
  
End



Public Sub contaPartidas()
  
  contaPtxt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaP.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e contaP.txt ];  then echo ARQUIVO JA EXISTE; else touch contaP.txt; echo 0 > contaP.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"
  
End



Public Sub contaempates()
  
  contaPtxt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaE.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e contaE.txt ];  then echo ARQUIVO JA EXISTE; else touch contaE.txt; echo 0 > contaE.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"
  
End



Public Sub contaDerrotas()
  
  contaDtxt = User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaD.txt" 
  Print "- - - - -"
  Shell "cd ~ &&  if [ -e .opentictactoe-cfg/configure ]; then  echo DIRETORIO JA EXISTE;   else echo CRIANDO DIRETORIO; mkdir .opentictactoe-cfg; cd .opentictactoe-cfg &&  mkdir configure; echo AGORA DIRETORIO JA EXISTE; fi;  cd ~ && cd .opentictactoe-cfg/configure && if [ -e contaD.txt ];  then echo ARQUIVO JA EXISTE; else touch contaD.txt; echo 0 > contaD.txt; echo AGORA ARQUIVO JA EXISTE; fi"
  
    Print "- - - - -"
  
End


Public Sub Dadoslog()
  ' Print "FAIXA: " & Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "configApp.txt"))
  ' Print "DADOS OFICIAIS:"
  Game.partidasganhas = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaV.txt"))
  Game.partidasganhascP2 = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaVcP2.txt"))
  Game.partidasperdidas = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaD.txt"))
  Game.partidasganhasP2 = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaV2.txt"))
  Game.partidasempatadas = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaE.txt"))
  Game.partidasjogadas = Trim(File.Load(User.Home &/ ".opentictactoe-cfg" &/ "configure" &/ "contaP.txt"))
' Game.partidasperdidasP2 = Game.partidasjogadas - (Game.partidasganhasP2 + Game.partidasganhas + Game.partidasperdidas)
  
  ' 
  ' Print "PARTIDAS JOGADAS: " & Game.partidasjogadas
  ' Print "VITORIAS CONTRA PC: " & Game.partidasganhas
  ' Print "DERROTAS CONTRA PC: " & Game.partidasperdidas
  ' Print "VITORIAS CONTRA PLAYER 2: " & Game.partidasperdidasP2
  ' Print "DERROTAS CONTRA PLAYER 2: " & Game.partidasganhasP2
  
End

Public Sub primeiraVez()
  
  If (Game.partidasjogadas = 0 And Game.partidasganhas = 0 And Game.partidasperdidas = 0) Then
    
  Print ("PRIMEIRA VEZ!")
  Endif
End


Public Sub alertDonation()
  
  History.carregarHistorico
    If (Game.partidasjogadas = 5) Or (Game.partidasjogadas = 100) Or (Game.partidasjogadas = 500) Then
    
  Print ("ALERT DONATE")
  MakeaDonation.Show
  Endif
  
End


Public Sub hist_MouseDown()

  History.carregarHistorico
  History.Show

End

Public Sub info_MouseDown()

  About.Show

End
